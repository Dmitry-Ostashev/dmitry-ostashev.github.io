<!DOCTYPE html><html lang="en"><head><script>
                    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                    })(window,document,'script','dataLayer','GTM-N6T7DVB');
                    </script><meta property="og:image" content="https://raw.githubusercontent.com/DevExpress/testcafe-gh-page-assets/master/src/images/testcafe-ogp-icon.png"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://raw.githubusercontent.com/DevExpress/testcafe-gh-page-assets/master/src/images/testcafe-twitter-card-icon.png"/><meta name="twitter:site" content="@DXTestCafe"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><meta name="msapplication-TileColor" content="#2d89ef"/><meta name="msapplication-config" content="/browserconfig.xml"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta property="og:url" content="/documentation/402842/guides/intermediate-guides/intercept-http-requests"/><meta property="og:title" content="Intercept HTTP Requests | Intermediate Guides | Guides | Docs"/><meta name="description" content=""/><link rel="canonical" href="https://testcafe.io/documentation/402842/guides/intermediate-guides/intercept-http-requests"/><title>Intercept HTTP Requests | Intermediate Guides | Guides | Docs</title><meta name="next-head-count" content="7"/><link rel="preload" href="/_next/static/css/0ef573a4a81b5dec1d8d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0ef573a4a81b5dec1d8d.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.9560630609611a3e02bc.js" as="script"/><link rel="preload" href="/_next/static/chunks/7c1f26e48d9c1d76d0a84bc721eae1bb8e4026f5.c5ff8e6740f85d8cfa32.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-18eaebfcc26b1f12fe7f.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-0cd866487878711e0df3.js" as="script"/><link rel="preload" href="/_next/static/chunks/13183c147836e35267ff1d4307193ed944e8c549.441bddd825acfa977748.js" as="script"/><link rel="preload" href="/_next/static/chunks/6559847ccf956d21366ca8101d3daaf2d4c4451f.4f2092c962d682918a42.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/documentation/%5BtopicUid%5D/%5B...topicTitle%5D-60aa84d5d57b6ec44690.js" as="script"/></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N6T7DVB" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div><header id="header" class="header-documentation"><div><div class="logo"><div class="burger"><div><div class="burger-stripes"><div></div><div></div><div></div></div><div class="burger-cross"><svg width="48" height="48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 15.429 15.429 14 34 32.571 32.571 34 14 15.429Z" fill="#fff"></path><path d="M32.571 14 34 15.429 15.429 34 14 32.571 32.571 14Z" fill="#fff"></path></svg></div></div></div><a aria-label="Return to testcafe.io homepage" href="/"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="48" fill="none"><path fill="#fff" d="M23.26 26l-1.292 1.333h5.169L32.306 32H5.169l5.169-4.667h3.877L12.921 26H9.046L0 34h37.474l-9.045-8H23.26z"></path><path fill="#fff" d="M34.755 13.232L31.54 10l-13.5 13.578-5.142-5.173-3.214 3.233 8.357 8.405 16.714-16.81z"></path></svg></a><span> / <a href="/documentation/402635/guides/overview/getting-started">Docs</a></span></div><nav class="header-right-nav"><ul><li><a href="/documentation/402634/guides" class="active">Guides</a></li><li><a href="/documentation/402632/api" class="">API</a></li><li><a href="/documentation/402633/recipes" class="">Recipes</a></li><li><a href="/documentation/402637/examples" class="">Examples</a></li><li><a href="/resources/team-blog" class="">Blog</a></li><li><a href="/documentation/403936/faq" class="">FAQ</a></li><li><a href="/support" class="">Support</a></li></ul></nav><div class="search"><div id="search-container"></div><div class="github"><div class="inline sm:hidden lg:inline xl:hidden"><a target="_blank" rel="noopener noreferrer" href="https://github.com/DevExpress/testcafe"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 0C5.37 0 0 5.50583 0 12.3035C0 17.7478 3.435 22.3463 8.205 23.9765C8.805 24.0842 9.03 23.715 9.03 23.3921C9.03 23.0999 9.015 22.131 9.015 21.1005C6 21.6696 5.22 20.347 4.98 19.6549C4.845 19.3012 4.26 18.2092 3.75 17.917C3.33 17.6863 2.73 17.1173 3.735 17.1019C4.68 17.0865 5.355 17.9939 5.58 18.363C6.66 20.2239 8.385 19.701 9.075 19.3781C9.18 18.5783 9.495 18.04 9.84 17.7325C7.17 17.4249 4.38 16.3637 4.38 11.6576C4.38 10.3196 4.845 9.21227 5.61 8.35102C5.49 8.04343 5.07 6.78232 5.73 5.09058C5.73 5.09058 6.735 4.76762 9.03 6.3517C9.99 6.07487 11.01 5.93645 12.03 5.93645C13.05 5.93645 14.07 6.07487 15.03 6.3517C17.325 4.75224 18.33 5.09058 18.33 5.09058C18.99 6.78232 18.57 8.04343 18.45 8.35102C19.215 9.21227 19.68 10.3042 19.68 11.6576C19.68 16.3791 16.875 17.4249 14.205 17.7325C14.64 18.1169 15.015 18.8552 15.015 20.0086C15.015 21.6542 15 22.9768 15 23.3921C15 23.715 15.225 24.0995 15.825 23.9765C18.2072 23.1519 20.2773 21.5822 21.7438 19.4882C23.2103 17.3942 23.9994 14.8814 24 12.3035C24 5.50583 18.63 0 12 0Z" fill="white"></path></svg></a></div><div class="stars hidden sm:flex lg:hidden xl:flex"><div class="widget widget-lg"><a class="btn" href="https://github.com/DevExpress/testcafe" rel="noopener noreferrer" target="_blank" aria-label="Star DevExpress/testcafe on GitHub"><svg viewBox="0 0 16 16" width="16" height="16" class="octicon octicon-mark-github" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg> <span>Star</span></a><a class="star-count" href="https://github.com/DevExpress/testcafe/stargazers" rel="noopener noreferrer" target="_blank">    9K</a></div></div></div></div></div></header><div class="middle"><main><div class="left with-sidebar"><nav class="sidebar sidebar-documentation "><div class="title"><button aria-label="Navigation bar toggle"><svg width="36" height="36" xmlns="http://www.w3.org/2000/svg"><path d="M11 12h14v2H11zM11 17h14v2H11zM11 22h14v2H11z"></path></svg></button><span>Docs</span></div><ul><li class="l-1"><span>Overview</span><ul><li class="l-2"><div class="flex"><a href="/documentation/402635/guides/overview/getting-started">Getting Started</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402631/guides/overview/why-testcafe">Why TestCafe?</a></div></li></ul></li><li class="l-1"><span>Basic Guides</span><ul><li class="l-2"><div class="flex"><a href="/documentation/402834/guides/basic-guides/install-testcafe">Install TestCafe</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402831/guides/basic-guides/test-structure">Test Structure</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402829/guides/basic-guides/element-selectors">Element Selectors</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402833/guides/basic-guides/test-actions">Test Actions</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402837/guides/basic-guides/assertions">Assertions</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402832/guides/basic-guides/client-functions">Client Functions</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402830/guides/basic-guides/run-tests">Run Tests</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402835/guides/basic-guides/debug-tests">Debug Tests</a></div></li></ul></li><li class="l-1"><span>Best Practices</span><ul><li class="l-2"><div class="flex"><a href="/documentation/402836/guides/best-practices/best-practices">Best Practices</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402963/guides/best-practices/speed-up-test-execution">Speed Up Test Execution</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402826/guides/best-practices/page-model">Page Model</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/404259/guides/best-practices/create-testcafe">Bootstrap your TestCafe project with create-testcafe</a></div></li></ul></li><li class="l-1"><span>Intermediate Guides</span><ul><li class="l-2"><div class="flex"><a href="/documentation/402828/guides/intermediate-guides/browsers">Browsers</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/403584/guides/intermediate-guides/mobile-devices-cloud-browsers-and-emulation">Mobile Devices, Cloud Browsers and Emulation</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/404237/guides/intermediate-guides/native-automation-mode">Native Automation Mode</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/404288/guides/intermediate-guides/visual-selector-debugger">Visual Selector Debugger</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/403626/guides/intermediate-guides/run-tests-concurrently">Run Tests Concurrently</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402825/guides/intermediate-guides/reporters">Reporters</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402824/guides/intermediate-guides/typescript-and-coffeescript">TypeScript and CoffeeScript</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402845/guides/intermediate-guides/authentication">Authentication and Roles</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402840/guides/intermediate-guides/screenshots-and-videos">Screenshots and Videos</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/403971/guides/intermediate-guides/api-testing">API Testing</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/403435/guides/intermediate-guides/hooks">Hooks</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/403841/guides/intermediate-guides/quarantine-mode">Quarantine Mode</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/403842/guides/intermediate-guides/live-mode">Live Mode</a></div></li><li class="l-2 active opened"><div class="flex"><a href="/documentation/402842/guides/intermediate-guides/intercept-http-requests">Intercept HTTP Requests</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/403436/guides/intermediate-guides/metadata-and-filtering">Metadata and Filtering</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402841/guides/intermediate-guides/multiple-browser-windows">Multiple Browser Windows</a></div></li></ul></li><li class="l-1"><span>Advanced Guides</span><ul><li class="l-2"><div class="flex"><a href="/documentation/403655/guides/advanced-guides/advanced-selector-techniques">Advanced Selector Techniques</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402843/guides/advanced-guides/inject-client-scripts">Inject Client Scripts</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/404258/guides/advanced-guides/esm-module-support">ESM Module Support</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/404150/guides/advanced-guides/custom-test-actions">Create Custom Test Actions</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/403219/guides/advanced-guides/fire-dom-events">Fire DOM Events</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/403849/guides/advanced-guides/execute-shell-commands-on-startup">Execute Shell Commands on Startup</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402839/guides/advanced-guides/test-https-features-and-http2-websites">Test HTTPS Features and HTTP/2 Websites</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402844/guides/advanced-guides/detect-the-client-browser-and-platform">Detect the Client Browser and Platform</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402838/guides/advanced-guides/use-testcafe-docker-image">Use the TestCafe Docker Image</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402827/guides/advanced-guides/built-in-wait-mechanisms">Built-In Wait Mechanisms</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/403998/guides/advanced-guides/chrome-replay-support">Replay Chrome User Flow Recordings</a></div></li></ul></li><li class="l-1"><span>Experimental Capabilities</span><ul><li class="l-2"><div class="flex"><a href="/documentation/403999/guides/experimental-capabilities/selector-debugging">Selector Debugging</a></div></li></ul></li><li class="l-1"><span>Continuous Integration</span><ul><li class="l-2"><div class="flex"><a href="/documentation/402823/guides/continuous-integration/appveyor">Integrate TestCafe with AppVeyor</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402822/guides/continuous-integration/azure-devops">Integrate TestCafe with Azure DevOps</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402821/guides/continuous-integration/bitbucket-pipelines">Run Tests in Bitbucket Pipelines</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402819/guides/continuous-integration/circleci">Integrate TestCafe With CircleCI</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402820/guides/continuous-integration/circleci-and-lambdatest">Run Tests on LambdaTest with CircleCI</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402817/guides/continuous-integration/github-actions">Integrate TestCafe with GitHub Actions</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402818/guides/continuous-integration/github-actions-and-browserstack">Run Tests on BrowserStack with GitHub Actions</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402816/guides/continuous-integration/gitlab">Integrate TestCafe with GitLab</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402815/guides/continuous-integration/jenkins">Integrate TestCafe with Jenkins</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402847/guides/continuous-integration/teamcity">Integrate TestCafe with TeamCity</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402813/guides/continuous-integration/travis">Run Tests in Travis CI</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402814/guides/continuous-integration/travis-and-sauce-labs">Run Tests on Sauce Labs with Travis CI</a></div></li></ul></li><li class="l-1"><span>Extend TestCafe</span><ul><li class="l-2"><div class="flex"><a href="/documentation/402811/guides/extend-testcafe/install-plugins">Install Plugins</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402810/guides/extend-testcafe/reporter-plugin">Reporter Plugin</a></div></li><li class="l-2"><div class="flex"><a href="/documentation/402812/guides/extend-testcafe/browser-provider-plugin">Browser Provider Plugin</a></div></li></ul></li></ul></nav></div><div class="content sm:px-12"><nav aria-label="breadcrumbs" class="breadcrumbs"><a href="/documentation/402635/guides/overview/getting-started">Docs</a><span aria-hidden="true" class="text-black px-1">→</span><a href="/documentation/402634/guides">Guides</a><span aria-hidden="true" class="text-black px-1">→</span><span aria-current="location" class="text-black">Intercept HTTP Requests</span></nav><div>        <h1>Intercept HTTP Requests</h1>

<p>When you <a class="xref" href="/documentation/402833/guides/basic-guides/test-actions">interact</a> with a web page, the page issues HTTP requests. Additionally, you can execute <a class="xref" href="/documentation/403971/guides/intermediate-guides/api-testing">arbitrary HTTP requests</a> with the <code>request</code> method.</p>
<p>TestCafe allows you <em>intercept</em> these requests with <strong>request hooks</strong>.</p>
<ul>
<li><a href="#log-http-requests">Log HTTP Requests</a> to track your application’s network activity.</li>
<li><a href="#mock-http-requests">Mock HTTP Requests</a> to feed dummy data to your application.</li>
<li><a href="#create-a-custom-request-hook">Create Custom Request Hooks</a> to perform other actions with HTTP requests, for example, emulate <strong>Kerberos</strong> or <strong>Client Certificate Authentication</strong>.</li>
</ul>
<p>You can attach request hooks to <a href="#attach-hooks-to-tests-and-fixtures">specific tests and fixtures</a> or define them <a href="#define-global-hooks-in-the-configuration-file">globally</a>.</p>
<h2 id="log-http-requests__$"><a class="anchor-fix" href="#log-http-requests" id="log-http-requests"></a>Log HTTP Requests<a class="anchor-hash" href="#log-http-requests"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"><path d="M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z" clip-rule="evenodd"></path></svg></a></h2>
<p>Use the <a class="xref" href="/documentation/402668/reference/test-api/requestlogger">request logger</a> to record outgoing HTTP requests and inspect responses to these requests. For instance, you may want to make sure that the data from a remote service is correct.</p>
<p>Use the <a class="xref" href="/documentation/402769/reference/test-api/requestlogger/constructor">RequestLogger</a> constructor to create a request logger.</p>
<pre><code class="lang-js">import { RequestLogger } from &#39;testcafe&#39;;

const simpleLogger = RequestLogger(&#39;http://example.com&#39;);
const headerLogger = RequestLogger(/testcafe/, {
    logRequestHeaders: true,
    logResponseHeaders: true
});
</code></pre><p>Attach the logger to <a href="#attach-hooks-to-tests-and-fixtures">a specific test / fixture</a> or <a href="#define-global-hooks-in-the-configuration-file">enable it globally</a>.</p>
<p>The <code>RequestLogger</code> logs the following data about outgoing requests:</p>
<ul>
<li>The request’s target URL</li>
<li>The request’s HTTP method</li>
<li>The status code of the response</li>
<li>The request sender’s user agent string</li>
</ul>
<p>Use the following <code>RequestLogger</code> methods to inspect this data:</p>
<table>
<thead>
<tr>
<th>Member</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a class="xref" href="/documentation/402766/reference/test-api/requestlogger/requests">requests</a></td>
<td>Returns an array of logged requests</td>
</tr>
<tr>
<td><a class="xref" href="/documentation/402768/reference/test-api/requestlogger/contains">contains</a></td>
<td>Succeeds if the logger contains a matching request</td>
</tr>
<tr>
<td><a class="xref" href="/documentation/402767/reference/test-api/requestlogger/count">count</a></td>
<td>Returns the number of matching requests</td>
</tr>
<tr>
<td><a class="xref" href="/documentation/402770/reference/test-api/requestlogger/clear">clear</a></td>
<td>Clears all logged requests</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre><code class="lang-js">import { Selector, RequestLogger } from &#39;testcafe&#39;;
import fs from &#39;fs&#39;;
import path from &#39;path&#39;;

const url = &#39;https://demos.devexpress.com/ASPxGridViewDemos/Exporting/Exporting.aspx&#39;;

const logger = RequestLogger({ url, method: &#39;post&#39; }, {
    logResponseHeaders: true,
    logResponseBody:    true
});

fixture `Export`
    .page(url)
    .requestHooks(logger);

test(&#39;export to csv&#39;, async t =&gt; {
    const exportToCSVButton = Selector(&#39;span&#39;).withText(&#39;Export to CSV&#39;);

    await t
        .click(exportToCSVButton)     
        // When you click &#39;Export&#39;, your browser downloads a compressed CSV file (*.gzip).
        .expect(logger.contains(r =&gt; r.response.statusCode === 200)).ok();

    const filePath = path.join(__dirname, &#39;exported-grid.zip&#39;);
    // Locates the file on the disk

    console.log(filePath);
    console.log(logger.requests[0].response.headers);

    fs.writeFileSync(filePath, logger.requests[0].response.body);

    // Use 3rd party modules to unpack the archive,
    // parse the CSV and check the data.
    // Alternatively, verify the file manually.
});
</code></pre><h2 id="mock-http-requests__$"><a class="anchor-fix" href="#mock-http-requests" id="mock-http-requests"></a>Mock HTTP Requests<a class="anchor-hash" href="#mock-http-requests"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"><path d="M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z" clip-rule="evenodd"></path></svg></a></h2>
<p>Use the <a class="xref" href="/documentation/402667/reference/test-api/requestmock">request mocker</a> to intercept your application’s HTTP requests and respond to them with dummy data. This is useful when some parts of your website’s infrastructure are difficult to deploy or costly to use.</p>
<p>Imagine that your application sends data to a third-party traffic analysis service. You do not want your functional tests to impact your website’s analytics. Add a request mocker to intercept requests to that service, and emulate the response as needed.</p>
<p>Use the <a class="xref" href="/documentation/402765/reference/test-api/requestmock/constructor">RequestMock</a> constructor to create a request mocker.</p>
<pre><code class="lang-js">var mock = RequestMock();
</code></pre><p>Append the <a class="xref" href="/documentation/402763/reference/test-api/requestmock/onrequestto">onRequestTo</a> and <a class="xref" href="/documentation/402762/reference/test-api/requestmock/respond">respond</a> methods to the <code>RequestMock</code> constructor:</p>
<pre><code class="lang-js">var mock = RequestMock()
    .onRequestTo(request1)
    .respond(responseMock1)
</code></pre><p>The <a class="xref" href="/documentation/402763/reference/test-api/requestmock/onrequestto">onRequestTo</a> method specifies which requests to intercept.
The <a class="xref" href="/documentation/402762/reference/test-api/requestmock/respond">respond</a> specifies how TestCafe should respond to the intercepted request.</p>
<p>If you need to mock multiple requests, you can chain these methods repeatedly:</p>
<pre><code class="lang-js">var mock = RequestMock()
    .onRequestTo(request1)
    .respond(responseMock1)
    .onRequestTo(request2)
    .respond(responseMock2)
</code></pre><p>To enable this request hook, <a href="#attach-hooks-to-tests-and-fixtures">attach it to a test/fixture</a> or <a href="#define-global-hooks-in-the-configuration-file">define it globally</a>.</p>
<p><strong>Example</strong></p>
<pre><code class="lang-js">import { Selector, RequestMock } from &#39;testcafe&#39;;

// Google Analytics API endpoint
const collectDataGoogleAnalyticsRegExp = new RegExp(&#39;https://www.google-analytics.com/collect&#39;);

// Binary image data for the mocked response
const mockedResponse = Buffer.from([0x47, 0x49, 0x46, 0x38, 0x39, 0x61, 0x01, 0x00, 0x01]);

const mock = RequestMock()
    .onRequestTo(collectDataGoogleAnalyticsRegExp)
    // This hook fires when the application sends a request to the Google Analytics API endpoint
    .respond(mockedResponse, 202, {
        &#39;content-length&#39;: mockedResponse.length,
        &#39;content-type&#39;: &#39;image/gif&#39;
    });
    // TestCafe intercepts the request and responds with the dummy data above (status code: 202). 

fixture `Fixture`
    .page(&#39;https://devexpress.github.io/testcafe/&#39;)
    .requestHooks(mock);

test(&#39;basic&#39;, async t =&gt; {
    await t
        .click(&#39;.get-started-button&#39;)
        .debug();
        // The debug action pauses the test.
        // Open your browser&#39;s Developer Tools to inspect the request and the response.
});
</code></pre><h2 id="create-a-custom-request-hook__$"><a class="anchor-fix" href="#create-a-custom-request-hook" id="create-a-custom-request-hook"></a>Create a Custom Request Hook<a class="anchor-hash" href="#create-a-custom-request-hook"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"><path d="M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z" clip-rule="evenodd"></path></svg></a></h2>
<p>Create custom request hooks to perform other actions with HTTP requests.</p>
<ol>
<li>Create a new class that inherits from the <a class="xref" href="/documentation/402669/reference/test-api/requesthook">RequestHook</a> class.</li>
<li>Override the <a class="xref" href="/documentation/402772/reference/test-api/requesthook/onrequest">onRequest</a> method to handle the request before it is sent.</li>
<li>Override the <a class="xref" href="/documentation/402771/reference/test-api/requesthook/onresponse">onResponse</a> method to handle the response after it is received.</li>
</ol>
<pre><code class="lang-js">import { RequestHook } from &#39;testcafe&#39;;

export class MyRequestHook extends RequestHook {
    constructor (requestFilterRules, responseEventConfigureOpts) {
        super(requestFilterRules, responseEventConfigureOpts);
        // ...
    }
    async onRequest (event) {
        // ...
    }
    async onResponse (event) {
        // ...
    }
}
</code></pre><ol start="4">
<li>Create an instance of your new hook. Attach it to <a href="#attach-hooks-to-tests-and-fixtures">a test/fixture</a> or define it <a href="#define-global-hooks-in-the-configuration-file">globally</a>.</li>
</ol>
<pre><code class="lang-js">import { MyRequestHook } from &#39;./my-request-hook&#39;;

const customHook = new MyRequestHook(/https?:\/\/example.com/);

fixture `My fixture`
    .page(&#39;http://example.com&#39;)
    .requestHooks(customHook);

test(&#39;My test&#39;, async t =&gt; {
        // test actions
});
</code></pre><p><strong>Example</strong></p>
<pre><code class="lang-js">import { Selector, RequestHook } from &#39;testcafe&#39;;

class JwtBearerAuthorization extends RequestHook {
    constructor () {
        // No URL filtering applied to this hook
        // so it will be used for all requests.
        super();
    }

    onRequest (e) {
        e.requestOptions.headers[&#39;Authorization&#39;] = &#39;generate token here&#39;;
    }

    onResponse (e) {
        // This method must also be overridden,
        // but you can leave it blank.
    }
}

const jwtBearerAuthorization = new JwtBearerAuthorization();

fixture `Fixture`
    .page(&#39;&lt;website URL&gt;&#39;)
    .requestHooks(jwtBearerAuthorization);

test(&#39;basic&#39;, async t =&gt; {
    /* some actions */
});
</code></pre><h2 id="attach-hooks-to-tests-and-fixtures__$"><a class="anchor-fix" href="#attach-hooks-to-tests-and-fixtures" id="attach-hooks-to-tests-and-fixtures"></a>Attach Hooks to Tests and Fixtures<a class="anchor-hash" href="#attach-hooks-to-tests-and-fixtures"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"><path d="M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z" clip-rule="evenodd"></path></svg></a></h2>
<p>Attach a hook to a test or fixture to handle HTTP requests within these entities.</p>
<ul>
<li>Use the <a class="xref" href="/documentation/402777/reference/test-api/fixture/requesthooks">fixture.requestHooks</a> method to attach a hook to a fixture. </li>
<li>Use the <a class="xref" href="/documentation/402731/reference/test-api/test/requesthooks">test.requestHooks</a> method to attach a hook to a test.</li>
<li>Use <a class="xref" href="/documentation/402713/reference/test-api/testcontroller/addrequesthooks">t.addRequestHooks</a> and <a class="xref" href="/documentation/402692/reference/test-api/testcontroller/removerequesthooks">t.removeRequestHooks</a> to attach and detach hooks on the fly.</li>
</ul>
<pre><code class="lang-js">import { RequestLogger, RequestMock } from &#39;testcafe&#39;;

const logger = RequestLogger(&#39;http://example.com&#39;);
const mock   = RequestMock()
    .onRequestTo(&#39;http://external-service.com/api/&#39;)
    .respond({ data: &#39;value&#39; });

fixture `My fixture`
    .page(&#39;http://example.com&#39;)
    .requestHooks(logger);

test
    .requestHooks(mock)
    (&#39;My test&#39;, async t =&gt; {
    await t
         .click(&#39;#send-logged-request&#39;)
         .expect(logger.count(() =&gt; true)).eql(1)
         .removeRequestHooks(logger)
         .click(&#39;#send-unlogged-request&#39;)
         .expect(logger.count(() =&gt; true)).eql(1)
         .addRequestHooks(logger)
         .click(&#39;#send-logged-request&#39;)
         .expect(logger.count(() =&gt; true)).eql(2);
});
</code></pre><h2 id="define-global-hooks-in-the-configuration-file__$"><a class="anchor-fix" href="#define-global-hooks-in-the-configuration-file" id="define-global-hooks-in-the-configuration-file"></a>Define Global Hooks in the Configuration File<a class="anchor-hash" href="#define-global-hooks-in-the-configuration-file"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"><path d="M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z" clip-rule="evenodd"></path></svg></a></h2>
<p>You may need to attach the same hook to multiple tests or fixtures. To avoid code duplication, you can define a global hook in the <a class="xref" href="/documentation/402638/reference/configuration-file">JavaScript configuration file</a>. </p>
<p>The following code shows an example that defines a global <code>RequestMock</code>. Note that test code doesn’t require an explicit hook declaration. The configuration file attaches the hook to the test. </p>
<pre><code class="lang-js">//.testcaferc.js
const { RequestMock } = require(&#39;testcafe&#39;);
const mock = RequestMock()
    .onRequestTo(&#39;https://api.mycorp.com/users/id/135865&#39;)
    .respond({
        name:     &#39;John Hearts&#39;,
        position: &#39;CTO&#39;,
    }, 200, { &#39;access-control-allow-origin&#39;: &#39;*&#39; })
    .onRequestTo(/internal.mycorp.com/)
    .respond(null, 404);

module.exports = {
    hooks: {
        request: mock,
    },
};
</code></pre><pre><code class="lang-js">//test.js
fixture `RequestMock`
    .page`https://mycorp.com`;

test(&#39;Should mock requests&#39;, async t =&gt; {
    const user = await t
    .eval(() =&gt; fetch(&#39;https://api.mycorp.com/users/id/135865&#39;)
    .then(res =&gt; res.json()));

    await t
        .expect(user).eql({ name: &#39;John Hearts&#39;, position: &#39;CTO&#39; })
        .navigateTo(&#39;https://internal.mycorp.com&#39;);
});
</code></pre><p>The hook declaration may require an extra step. In the example above, the test does not need to read any data from the <code>RequestMock</code> object. The situation changes if the hook is a <code>RequestLogger</code> or a custom <code>RequestMock</code>. Tests may need to obtain the hook object’s data in such cases.</p>
<p>The following example demonstrates how you can declare a global <code>RequestLogger</code>. The test needs to access the logger object in order to read and validate its data. To enable such access, define an extra file: “logger.js”. This file defines the hook object and supplies it to both the test and the configuration file.</p>
<pre><code class="lang-js">//logger.js
const { RequestLogger } = require(&#39;testcafe&#39;);
module.exports = new RequestLogger();
</code></pre><pre><code class="lang-js">//.testcaferc.js
const logger = require(&#39;./logger&#39;);

module.exports = {
    hooks: {
        request: logger,
    },
};
</code></pre><pre><code class="lang-js">//test.js
const { logger } = &#39;./logger&#39;;

fixture`RequestLogger`
    .page(&#39;https://devexpress.github.io/testcafe/example/&#39;);

test(&#39;Check request&#39;, async t =&gt; {
    await t
    .expect(logger.contains(record =&gt; record.response.statusCode === 200)).ok()
    .expect(logger.requests[0].request.method).eql(&#39;get&#39;);
});
</code></pre><h2 id="request-hook-conflicts__$"><a class="anchor-fix" href="#request-hook-conflicts" id="request-hook-conflicts"></a>Request Hook Conflicts<a class="anchor-hash" href="#request-hook-conflicts"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"><path d="M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z" clip-rule="evenodd"></path></svg></a></h2>
<p>If a single request is subject to multiple request hooks, TestCafe executes the hooks in the following order:</p>
<ul>
<li>Global hook</li>
<li>Fixture hook</li>
<li>Test hook</li>
</ul>
</div></div><div class="right"><nav class="scrollspy"><span class="scrollspy-title">On this page</span><ul><li><a href="#log-http-requests" class="scrollspy-link">Log HTTP Requests</a></li><li><a href="#mock-http-requests" class="scrollspy-link">Mock HTTP Requests</a></li><li><a href="#create-a-custom-request-hook" class="scrollspy-link">Create a Custom Request Hook</a></li><li><a href="#attach-hooks-to-tests-and-fixtures" class="scrollspy-link">Attach Hooks to Tests and Fixtures</a></li><li><a href="#define-global-hooks-in-the-configuration-file" class="scrollspy-link">Define Global Hooks in the Configuration File</a></li><li><a href="#request-hook-conflicts" class="scrollspy-link">Request Hook Conflicts</a></li></ul></nav></div></main></div><footer><div class="main-middle"><div class="footer-grid"><div class="social-container"><img width="200" height="40" src="/img/testcafe-logo.svg" alt="TestCafe"/><p class="footer-logo-description">TestCafe is a user-friendly end-to-end testing framework. Free and open source test runner. Powerful desktop app. Enterprise-quality web services.</p><div class="social"><a target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/dxtestcafe/"><span class="sr-only">Facebook</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd"></path></svg></a><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/DXTestCafe"><span class="sr-only">Twitter</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path></svg></a><a target="_blank" rel="noopener noreferrer" href="https://github.com/DevExpress/testcafe"><span class="sr-only">GitHub</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path></svg></a><a href="mailto:testcafeteam@devexpress.com"><span class="sr-only">Email</span><svg width="24" height="24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M2.004 7.198 12 11.862l9.996-4.664a2.272 2.272 0 0 0-.78-1.562A2.6 2.6 0 0 0 19.5 5h-15a2.6 2.6 0 0 0-1.716.636 2.272 2.272 0 0 0-.78 1.562Z"></path><path d="m22 9.804-10 4.667L2 9.804v6.863c0 .618.263 1.212.732 1.65A2.593 2.593 0 0 0 4.5 19h15c.663 0 1.299-.246 1.768-.683a2.257 2.257 0 0 0 .732-1.65V9.804Z"></path></svg></a><a target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/playlist?list=PL8h4jt35t1wirqPiT68hV0cpX1ppQMVtF"><span class="sr-only">Youtube</span><svg width="24" height="24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V8a3 3 0 0 0-3-3H5Zm9.685 6.463L10 9v6l4.685-2.463c.42-.222.42-.853 0-1.074Z"></path></svg></a></div></div><nav aria-label="Footer"><h2 class="sr-only">Footer navigation</h2><div><h3 class="footer-navigation-header">Product</h3><ul class="footer-navigation-column-section-list"><li><a href="/documentation/402631/guides/overview/why-testcafe">Why TestCafe</a></li><li><a href="/documentation/402635/guides/overview/getting-started">Getting Started</a></li><li><a href="https://www.devexpress.com/products/testcafestudio/" target="_blank" rel="noopener noreferrer">TestCafe Studio</a></li><li><a href="/documentation/402809/guides/continuous-integration">Integrations</a></li><li><a href="/release-notes">What&#x27;s New</a></li><li><a href="/402949/roadmap">Roadmap</a></li></ul></div><div><h3 class="footer-navigation-header">Features</h3><ul class="footer-navigation-column-section-list"><li><a href="/documentation/402828/guides/concepts/browsers">Cross-browser tests</a></li><li><a href="/documentation/403971/guides/intermediate-guides/api-testing">API tests</a></li><li><a href="/documentation/402841/guides/intermediate-guides/multiple-browser-windows">Multi-window tests</a></li><li><a href="/documentation/402833/guides/basic-guides/test-actions#work-with-iframes">Iframe tests</a></li><li><a href="/documentation/402830/guides/basic-guides/run-tests#live-mode">Live Mode</a></li><li><a href="/documentation/402830/guides/basic-guides/run-tests#quarantine-mode">Unstable test detection</a></li><li><a href="/documentation/402840/guides/intermediate-guides/screenshots-and-videos">Screenshots and Videos</a></li><li><a href="/documentation/403626/guides/intermediate-guides/run-tests-concurrently">Concurrent test runs</a></li><li><a href="/documentation/402824/guides/concepts/typescript-and-coffeescript">TypeScript tests</a></li></ul></div><div><h3 class="footer-navigation-header">Resources</h3><ul class="footer-navigation-column-section-list"><li><a href="/resources/team-blog">Blog</a></li><li><a href="/resources/community-blogs">Community Blogs</a></li><li><a href="/resources/courses">Courses</a></li><li><a href="/resources/books">Books</a></li><li><a href="/case-studies">Case studies</a></li></ul></div><div><h3 class="footer-navigation-header">Learn</h3><ul class="footer-navigation-column-section-list"><li><a href="/documentation/402635/guides/overview/getting-started">Docs</a></li><li><a href="/documentation/402636/faq/general-info">FAQ</a></li><li><a href="/documentation/402634/guides">Guides</a></li><li><a href="/documentation/402836/guides/basic-guides/best-practices">Best Practices</a></li><li><a target="_blank" rel="noopener noreferrer" href="/documentation/402637/examples">Examples</a></li></ul><h3 class="footer-navigation-header">Support</h3><ul class="footer-navigation-column-section-list"><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/DevExpress/testcafe/issues/new?assignees=&amp;labels=TYPE%3A+bug&amp;template=bug_report.yaml">Report an Issue</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/DevExpress/testcafe/issues/new?assignees=&amp;labels=TYPE%3A+enhancement&amp;template=feature_request.yaml">Suggest a Feature</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/questions/ask?tags=testcafe">Ask on StackOverflow</a></li></ul></div></nav></div><div class="footer-copyright-container"><p>© 2012–2023 Developer Express Inc. Use of this site constitutes acceptance of our <a target="_blank" href="https://www.devexpress.com/aboutus/privacy-policy.xml" rel="noopener noreferrer">Privacy Policy.</a></p><p>All trademarks or registered trademarks are property of their respective owners.</p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"content":{"html":"        \u003ch1\u003eIntercept HTTP Requests\u003c/h1\u003e\r\n\r\n\u003cp\u003eWhen you \u003ca class=\"xref\" href=\"/documentation/402833/guides/basic-guides/test-actions\"\u003einteract\u003c/a\u003e with a web page, the page issues HTTP requests. Additionally, you can execute \u003ca class=\"xref\" href=\"/documentation/403971/guides/intermediate-guides/api-testing\"\u003earbitrary HTTP requests\u003c/a\u003e with the \u003ccode\u003erequest\u003c/code\u003e method.\u003c/p\u003e\r\n\u003cp\u003eTestCafe allows you \u003cem\u003eintercept\u003c/em\u003e these requests with \u003cstrong\u003erequest hooks\u003c/strong\u003e.\u003c/p\u003e\r\n\u003cul\u003e\r\n\u003cli\u003e\u003ca href=\"#log-http-requests\"\u003eLog HTTP Requests\u003c/a\u003e to track your application’s network activity.\u003c/li\u003e\r\n\u003cli\u003e\u003ca href=\"#mock-http-requests\"\u003eMock HTTP Requests\u003c/a\u003e to feed dummy data to your application.\u003c/li\u003e\r\n\u003cli\u003e\u003ca href=\"#create-a-custom-request-hook\"\u003eCreate Custom Request Hooks\u003c/a\u003e to perform other actions with HTTP requests, for example, emulate \u003cstrong\u003eKerberos\u003c/strong\u003e or \u003cstrong\u003eClient Certificate Authentication\u003c/strong\u003e.\u003c/li\u003e\r\n\u003c/ul\u003e\r\n\u003cp\u003eYou can attach request hooks to \u003ca href=\"#attach-hooks-to-tests-and-fixtures\"\u003especific tests and fixtures\u003c/a\u003e or define them \u003ca href=\"#define-global-hooks-in-the-configuration-file\"\u003eglobally\u003c/a\u003e.\u003c/p\u003e\r\n\u003ch2 id=\"log-http-requests__$\"\u003e\u003ca class=\"anchor-fix\" href=\"#log-http-requests\" id=\"log-http-requests\"\u003e\u003c/a\u003eLog HTTP Requests\u003ca class=\"anchor-hash\" href=\"#log-http-requests\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"\u003e\u003cpath d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\r\n\u003cp\u003eUse the \u003ca class=\"xref\" href=\"/documentation/402668/reference/test-api/requestlogger\"\u003erequest logger\u003c/a\u003e to record outgoing HTTP requests and inspect responses to these requests. For instance, you may want to make sure that the data from a remote service is correct.\u003c/p\u003e\r\n\u003cp\u003eUse the \u003ca class=\"xref\" href=\"/documentation/402769/reference/test-api/requestlogger/constructor\"\u003eRequestLogger\u003c/a\u003e constructor to create a request logger.\u003c/p\u003e\r\n\u003cpre\u003e\u003ccode class=\"lang-js\"\u003eimport { RequestLogger } from \u0026#39;testcafe\u0026#39;;\r\n\r\nconst simpleLogger = RequestLogger(\u0026#39;http://example.com\u0026#39;);\r\nconst headerLogger = RequestLogger(/testcafe/, {\r\n    logRequestHeaders: true,\r\n    logResponseHeaders: true\r\n});\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAttach the logger to \u003ca href=\"#attach-hooks-to-tests-and-fixtures\"\u003ea specific test / fixture\u003c/a\u003e or \u003ca href=\"#define-global-hooks-in-the-configuration-file\"\u003eenable it globally\u003c/a\u003e.\u003c/p\u003e\r\n\u003cp\u003eThe \u003ccode\u003eRequestLogger\u003c/code\u003e logs the following data about outgoing requests:\u003c/p\u003e\r\n\u003cul\u003e\r\n\u003cli\u003eThe request’s target URL\u003c/li\u003e\r\n\u003cli\u003eThe request’s HTTP method\u003c/li\u003e\r\n\u003cli\u003eThe status code of the response\u003c/li\u003e\r\n\u003cli\u003eThe request sender’s user agent string\u003c/li\u003e\r\n\u003c/ul\u003e\r\n\u003cp\u003eUse the following \u003ccode\u003eRequestLogger\u003c/code\u003e methods to inspect this data:\u003c/p\u003e\r\n\u003ctable\u003e\r\n\u003cthead\u003e\r\n\u003ctr\u003e\r\n\u003cth\u003eMember\u003c/th\u003e\r\n\u003cth\u003eDescription\u003c/th\u003e\r\n\u003c/tr\u003e\r\n\u003c/thead\u003e\r\n\u003ctbody\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003e\u003ca class=\"xref\" href=\"/documentation/402766/reference/test-api/requestlogger/requests\"\u003erequests\u003c/a\u003e\u003c/td\u003e\r\n\u003ctd\u003eReturns an array of logged requests\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003e\u003ca class=\"xref\" href=\"/documentation/402768/reference/test-api/requestlogger/contains\"\u003econtains\u003c/a\u003e\u003c/td\u003e\r\n\u003ctd\u003eSucceeds if the logger contains a matching request\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003e\u003ca class=\"xref\" href=\"/documentation/402767/reference/test-api/requestlogger/count\"\u003ecount\u003c/a\u003e\u003c/td\u003e\r\n\u003ctd\u003eReturns the number of matching requests\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003e\u003ca class=\"xref\" href=\"/documentation/402770/reference/test-api/requestlogger/clear\"\u003eclear\u003c/a\u003e\u003c/td\u003e\r\n\u003ctd\u003eClears all logged requests\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003c/tbody\u003e\r\n\u003c/table\u003e\r\n\u003cp\u003e\u003cstrong\u003eExample\u003c/strong\u003e\u003c/p\u003e\r\n\u003cpre\u003e\u003ccode class=\"lang-js\"\u003eimport { Selector, RequestLogger } from \u0026#39;testcafe\u0026#39;;\r\nimport fs from \u0026#39;fs\u0026#39;;\r\nimport path from \u0026#39;path\u0026#39;;\r\n\r\nconst url = \u0026#39;https://demos.devexpress.com/ASPxGridViewDemos/Exporting/Exporting.aspx\u0026#39;;\r\n\r\nconst logger = RequestLogger({ url, method: \u0026#39;post\u0026#39; }, {\r\n    logResponseHeaders: true,\r\n    logResponseBody:    true\r\n});\r\n\r\nfixture `Export`\r\n    .page(url)\r\n    .requestHooks(logger);\r\n\r\ntest(\u0026#39;export to csv\u0026#39;, async t =\u0026gt; {\r\n    const exportToCSVButton = Selector(\u0026#39;span\u0026#39;).withText(\u0026#39;Export to CSV\u0026#39;);\r\n\r\n    await t\r\n        .click(exportToCSVButton)     \r\n        // When you click \u0026#39;Export\u0026#39;, your browser downloads a compressed CSV file (*.gzip).\r\n        .expect(logger.contains(r =\u0026gt; r.response.statusCode === 200)).ok();\r\n\r\n    const filePath = path.join(__dirname, \u0026#39;exported-grid.zip\u0026#39;);\r\n    // Locates the file on the disk\r\n\r\n    console.log(filePath);\r\n    console.log(logger.requests[0].response.headers);\r\n\r\n    fs.writeFileSync(filePath, logger.requests[0].response.body);\r\n\r\n    // Use 3rd party modules to unpack the archive,\r\n    // parse the CSV and check the data.\r\n    // Alternatively, verify the file manually.\r\n});\r\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"mock-http-requests__$\"\u003e\u003ca class=\"anchor-fix\" href=\"#mock-http-requests\" id=\"mock-http-requests\"\u003e\u003c/a\u003eMock HTTP Requests\u003ca class=\"anchor-hash\" href=\"#mock-http-requests\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"\u003e\u003cpath d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\r\n\u003cp\u003eUse the \u003ca class=\"xref\" href=\"/documentation/402667/reference/test-api/requestmock\"\u003erequest mocker\u003c/a\u003e to intercept your application’s HTTP requests and respond to them with dummy data. This is useful when some parts of your website’s infrastructure are difficult to deploy or costly to use.\u003c/p\u003e\r\n\u003cp\u003eImagine that your application sends data to a third-party traffic analysis service. You do not want your functional tests to impact your website’s analytics. Add a request mocker to intercept requests to that service, and emulate the response as needed.\u003c/p\u003e\r\n\u003cp\u003eUse the \u003ca class=\"xref\" href=\"/documentation/402765/reference/test-api/requestmock/constructor\"\u003eRequestMock\u003c/a\u003e constructor to create a request mocker.\u003c/p\u003e\r\n\u003cpre\u003e\u003ccode class=\"lang-js\"\u003evar mock = RequestMock();\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAppend the \u003ca class=\"xref\" href=\"/documentation/402763/reference/test-api/requestmock/onrequestto\"\u003eonRequestTo\u003c/a\u003e and \u003ca class=\"xref\" href=\"/documentation/402762/reference/test-api/requestmock/respond\"\u003erespond\u003c/a\u003e methods to the \u003ccode\u003eRequestMock\u003c/code\u003e constructor:\u003c/p\u003e\r\n\u003cpre\u003e\u003ccode class=\"lang-js\"\u003evar mock = RequestMock()\r\n    .onRequestTo(request1)\r\n    .respond(responseMock1)\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe \u003ca class=\"xref\" href=\"/documentation/402763/reference/test-api/requestmock/onrequestto\"\u003eonRequestTo\u003c/a\u003e method specifies which requests to intercept.\r\nThe \u003ca class=\"xref\" href=\"/documentation/402762/reference/test-api/requestmock/respond\"\u003erespond\u003c/a\u003e specifies how TestCafe should respond to the intercepted request.\u003c/p\u003e\r\n\u003cp\u003eIf you need to mock multiple requests, you can chain these methods repeatedly:\u003c/p\u003e\r\n\u003cpre\u003e\u003ccode class=\"lang-js\"\u003evar mock = RequestMock()\r\n    .onRequestTo(request1)\r\n    .respond(responseMock1)\r\n    .onRequestTo(request2)\r\n    .respond(responseMock2)\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTo enable this request hook, \u003ca href=\"#attach-hooks-to-tests-and-fixtures\"\u003eattach it to a test/fixture\u003c/a\u003e or \u003ca href=\"#define-global-hooks-in-the-configuration-file\"\u003edefine it globally\u003c/a\u003e.\u003c/p\u003e\r\n\u003cp\u003e\u003cstrong\u003eExample\u003c/strong\u003e\u003c/p\u003e\r\n\u003cpre\u003e\u003ccode class=\"lang-js\"\u003eimport { Selector, RequestMock } from \u0026#39;testcafe\u0026#39;;\r\n\r\n// Google Analytics API endpoint\r\nconst collectDataGoogleAnalyticsRegExp = new RegExp(\u0026#39;https://www.google-analytics.com/collect\u0026#39;);\r\n\r\n// Binary image data for the mocked response\r\nconst mockedResponse = Buffer.from([0x47, 0x49, 0x46, 0x38, 0x39, 0x61, 0x01, 0x00, 0x01]);\r\n\r\nconst mock = RequestMock()\r\n    .onRequestTo(collectDataGoogleAnalyticsRegExp)\r\n    // This hook fires when the application sends a request to the Google Analytics API endpoint\r\n    .respond(mockedResponse, 202, {\r\n        \u0026#39;content-length\u0026#39;: mockedResponse.length,\r\n        \u0026#39;content-type\u0026#39;: \u0026#39;image/gif\u0026#39;\r\n    });\r\n    // TestCafe intercepts the request and responds with the dummy data above (status code: 202). \r\n\r\nfixture `Fixture`\r\n    .page(\u0026#39;https://devexpress.github.io/testcafe/\u0026#39;)\r\n    .requestHooks(mock);\r\n\r\ntest(\u0026#39;basic\u0026#39;, async t =\u0026gt; {\r\n    await t\r\n        .click(\u0026#39;.get-started-button\u0026#39;)\r\n        .debug();\r\n        // The debug action pauses the test.\r\n        // Open your browser\u0026#39;s Developer Tools to inspect the request and the response.\r\n});\r\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"create-a-custom-request-hook__$\"\u003e\u003ca class=\"anchor-fix\" href=\"#create-a-custom-request-hook\" id=\"create-a-custom-request-hook\"\u003e\u003c/a\u003eCreate a Custom Request Hook\u003ca class=\"anchor-hash\" href=\"#create-a-custom-request-hook\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"\u003e\u003cpath d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\r\n\u003cp\u003eCreate custom request hooks to perform other actions with HTTP requests.\u003c/p\u003e\r\n\u003col\u003e\r\n\u003cli\u003eCreate a new class that inherits from the \u003ca class=\"xref\" href=\"/documentation/402669/reference/test-api/requesthook\"\u003eRequestHook\u003c/a\u003e class.\u003c/li\u003e\r\n\u003cli\u003eOverride the \u003ca class=\"xref\" href=\"/documentation/402772/reference/test-api/requesthook/onrequest\"\u003eonRequest\u003c/a\u003e method to handle the request before it is sent.\u003c/li\u003e\r\n\u003cli\u003eOverride the \u003ca class=\"xref\" href=\"/documentation/402771/reference/test-api/requesthook/onresponse\"\u003eonResponse\u003c/a\u003e method to handle the response after it is received.\u003c/li\u003e\r\n\u003c/ol\u003e\r\n\u003cpre\u003e\u003ccode class=\"lang-js\"\u003eimport { RequestHook } from \u0026#39;testcafe\u0026#39;;\r\n\r\nexport class MyRequestHook extends RequestHook {\r\n    constructor (requestFilterRules, responseEventConfigureOpts) {\r\n        super(requestFilterRules, responseEventConfigureOpts);\r\n        // ...\r\n    }\r\n    async onRequest (event) {\r\n        // ...\r\n    }\r\n    async onResponse (event) {\r\n        // ...\r\n    }\r\n}\r\n\u003c/code\u003e\u003c/pre\u003e\u003col start=\"4\"\u003e\r\n\u003cli\u003eCreate an instance of your new hook. Attach it to \u003ca href=\"#attach-hooks-to-tests-and-fixtures\"\u003ea test/fixture\u003c/a\u003e or define it \u003ca href=\"#define-global-hooks-in-the-configuration-file\"\u003eglobally\u003c/a\u003e.\u003c/li\u003e\r\n\u003c/ol\u003e\r\n\u003cpre\u003e\u003ccode class=\"lang-js\"\u003eimport { MyRequestHook } from \u0026#39;./my-request-hook\u0026#39;;\r\n\r\nconst customHook = new MyRequestHook(/https?:\\/\\/example.com/);\r\n\r\nfixture `My fixture`\r\n    .page(\u0026#39;http://example.com\u0026#39;)\r\n    .requestHooks(customHook);\r\n\r\ntest(\u0026#39;My test\u0026#39;, async t =\u0026gt; {\r\n        // test actions\r\n});\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eExample\u003c/strong\u003e\u003c/p\u003e\r\n\u003cpre\u003e\u003ccode class=\"lang-js\"\u003eimport { Selector, RequestHook } from \u0026#39;testcafe\u0026#39;;\r\n\r\nclass JwtBearerAuthorization extends RequestHook {\r\n    constructor () {\r\n        // No URL filtering applied to this hook\r\n        // so it will be used for all requests.\r\n        super();\r\n    }\r\n\r\n    onRequest (e) {\r\n        e.requestOptions.headers[\u0026#39;Authorization\u0026#39;] = \u0026#39;generate token here\u0026#39;;\r\n    }\r\n\r\n    onResponse (e) {\r\n        // This method must also be overridden,\r\n        // but you can leave it blank.\r\n    }\r\n}\r\n\r\nconst jwtBearerAuthorization = new JwtBearerAuthorization();\r\n\r\nfixture `Fixture`\r\n    .page(\u0026#39;\u0026lt;website URL\u0026gt;\u0026#39;)\r\n    .requestHooks(jwtBearerAuthorization);\r\n\r\ntest(\u0026#39;basic\u0026#39;, async t =\u0026gt; {\r\n    /* some actions */\r\n});\r\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"attach-hooks-to-tests-and-fixtures__$\"\u003e\u003ca class=\"anchor-fix\" href=\"#attach-hooks-to-tests-and-fixtures\" id=\"attach-hooks-to-tests-and-fixtures\"\u003e\u003c/a\u003eAttach Hooks to Tests and Fixtures\u003ca class=\"anchor-hash\" href=\"#attach-hooks-to-tests-and-fixtures\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"\u003e\u003cpath d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\r\n\u003cp\u003eAttach a hook to a test or fixture to handle HTTP requests within these entities.\u003c/p\u003e\r\n\u003cul\u003e\r\n\u003cli\u003eUse the \u003ca class=\"xref\" href=\"/documentation/402777/reference/test-api/fixture/requesthooks\"\u003efixture.requestHooks\u003c/a\u003e method to attach a hook to a fixture. \u003c/li\u003e\r\n\u003cli\u003eUse the \u003ca class=\"xref\" href=\"/documentation/402731/reference/test-api/test/requesthooks\"\u003etest.requestHooks\u003c/a\u003e method to attach a hook to a test.\u003c/li\u003e\r\n\u003cli\u003eUse \u003ca class=\"xref\" href=\"/documentation/402713/reference/test-api/testcontroller/addrequesthooks\"\u003et.addRequestHooks\u003c/a\u003e and \u003ca class=\"xref\" href=\"/documentation/402692/reference/test-api/testcontroller/removerequesthooks\"\u003et.removeRequestHooks\u003c/a\u003e to attach and detach hooks on the fly.\u003c/li\u003e\r\n\u003c/ul\u003e\r\n\u003cpre\u003e\u003ccode class=\"lang-js\"\u003eimport { RequestLogger, RequestMock } from \u0026#39;testcafe\u0026#39;;\r\n\r\nconst logger = RequestLogger(\u0026#39;http://example.com\u0026#39;);\r\nconst mock   = RequestMock()\r\n    .onRequestTo(\u0026#39;http://external-service.com/api/\u0026#39;)\r\n    .respond({ data: \u0026#39;value\u0026#39; });\r\n\r\nfixture `My fixture`\r\n    .page(\u0026#39;http://example.com\u0026#39;)\r\n    .requestHooks(logger);\r\n\r\ntest\r\n    .requestHooks(mock)\r\n    (\u0026#39;My test\u0026#39;, async t =\u0026gt; {\r\n    await t\r\n         .click(\u0026#39;#send-logged-request\u0026#39;)\r\n         .expect(logger.count(() =\u0026gt; true)).eql(1)\r\n         .removeRequestHooks(logger)\r\n         .click(\u0026#39;#send-unlogged-request\u0026#39;)\r\n         .expect(logger.count(() =\u0026gt; true)).eql(1)\r\n         .addRequestHooks(logger)\r\n         .click(\u0026#39;#send-logged-request\u0026#39;)\r\n         .expect(logger.count(() =\u0026gt; true)).eql(2);\r\n});\r\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"define-global-hooks-in-the-configuration-file__$\"\u003e\u003ca class=\"anchor-fix\" href=\"#define-global-hooks-in-the-configuration-file\" id=\"define-global-hooks-in-the-configuration-file\"\u003e\u003c/a\u003eDefine Global Hooks in the Configuration File\u003ca class=\"anchor-hash\" href=\"#define-global-hooks-in-the-configuration-file\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"\u003e\u003cpath d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\r\n\u003cp\u003eYou may need to attach the same hook to multiple tests or fixtures. To avoid code duplication, you can define a global hook in the \u003ca class=\"xref\" href=\"/documentation/402638/reference/configuration-file\"\u003eJavaScript configuration file\u003c/a\u003e. \u003c/p\u003e\r\n\u003cp\u003eThe following code shows an example that defines a global \u003ccode\u003eRequestMock\u003c/code\u003e. Note that test code doesn’t require an explicit hook declaration. The configuration file attaches the hook to the test. \u003c/p\u003e\r\n\u003cpre\u003e\u003ccode class=\"lang-js\"\u003e//.testcaferc.js\r\nconst { RequestMock } = require(\u0026#39;testcafe\u0026#39;);\r\nconst mock = RequestMock()\r\n    .onRequestTo(\u0026#39;https://api.mycorp.com/users/id/135865\u0026#39;)\r\n    .respond({\r\n        name:     \u0026#39;John Hearts\u0026#39;,\r\n        position: \u0026#39;CTO\u0026#39;,\r\n    }, 200, { \u0026#39;access-control-allow-origin\u0026#39;: \u0026#39;*\u0026#39; })\r\n    .onRequestTo(/internal.mycorp.com/)\r\n    .respond(null, 404);\r\n\r\nmodule.exports = {\r\n    hooks: {\r\n        request: mock,\r\n    },\r\n};\r\n\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"lang-js\"\u003e//test.js\r\nfixture `RequestMock`\r\n    .page`https://mycorp.com`;\r\n\r\ntest(\u0026#39;Should mock requests\u0026#39;, async t =\u0026gt; {\r\n    const user = await t\r\n    .eval(() =\u0026gt; fetch(\u0026#39;https://api.mycorp.com/users/id/135865\u0026#39;)\r\n    .then(res =\u0026gt; res.json()));\r\n\r\n    await t\r\n        .expect(user).eql({ name: \u0026#39;John Hearts\u0026#39;, position: \u0026#39;CTO\u0026#39; })\r\n        .navigateTo(\u0026#39;https://internal.mycorp.com\u0026#39;);\r\n});\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe hook declaration may require an extra step. In the example above, the test does not need to read any data from the \u003ccode\u003eRequestMock\u003c/code\u003e object. The situation changes if the hook is a \u003ccode\u003eRequestLogger\u003c/code\u003e or a custom \u003ccode\u003eRequestMock\u003c/code\u003e. Tests may need to obtain the hook object’s data in such cases.\u003c/p\u003e\r\n\u003cp\u003eThe following example demonstrates how you can declare a global \u003ccode\u003eRequestLogger\u003c/code\u003e. The test needs to access the logger object in order to read and validate its data. To enable such access, define an extra file: “logger.js”. This file defines the hook object and supplies it to both the test and the configuration file.\u003c/p\u003e\r\n\u003cpre\u003e\u003ccode class=\"lang-js\"\u003e//logger.js\r\nconst { RequestLogger } = require(\u0026#39;testcafe\u0026#39;);\r\nmodule.exports = new RequestLogger();\r\n\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"lang-js\"\u003e//.testcaferc.js\r\nconst logger = require(\u0026#39;./logger\u0026#39;);\r\n\r\nmodule.exports = {\r\n    hooks: {\r\n        request: logger,\r\n    },\r\n};\r\n\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"lang-js\"\u003e//test.js\r\nconst { logger } = \u0026#39;./logger\u0026#39;;\r\n\r\nfixture`RequestLogger`\r\n    .page(\u0026#39;https://devexpress.github.io/testcafe/example/\u0026#39;);\r\n\r\ntest(\u0026#39;Check request\u0026#39;, async t =\u0026gt; {\r\n    await t\r\n    .expect(logger.contains(record =\u0026gt; record.response.statusCode === 200)).ok()\r\n    .expect(logger.requests[0].request.method).eql(\u0026#39;get\u0026#39;);\r\n});\r\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"request-hook-conflicts__$\"\u003e\u003ca class=\"anchor-fix\" href=\"#request-hook-conflicts\" id=\"request-hook-conflicts\"\u003e\u003c/a\u003eRequest Hook Conflicts\u003ca class=\"anchor-hash\" href=\"#request-hook-conflicts\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"\u003e\u003cpath d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\r\n\u003cp\u003eIf a single request is subject to multiple request hooks, TestCafe executes the hooks in the following order:\u003c/p\u003e\r\n\u003cul\u003e\r\n\u003cli\u003eGlobal hook\u003c/li\u003e\r\n\u003cli\u003eFixture hook\u003c/li\u003e\r\n\u003cli\u003eTest hook\u003c/li\u003e\r\n\u003c/ul\u003e\r\n","headers":[{"title":"Log HTTP Requests","tagName":"h2","id":"log-http-requests","lvl":2},{"title":"Mock HTTP Requests","tagName":"h2","id":"mock-http-requests","lvl":2},{"title":"Create a Custom Request Hook","tagName":"h2","id":"create-a-custom-request-hook","lvl":2},{"title":"Attach Hooks to Tests and Fixtures","tagName":"h2","id":"attach-hooks-to-tests-and-fixtures","lvl":2},{"title":"Define Global Hooks in the Configuration File","tagName":"h2","id":"define-global-hooks-in-the-configuration-file","lvl":2},{"title":"Request Hook Conflicts","tagName":"h2","id":"request-hook-conflicts","lvl":2}],"title":"Intercept HTTP Requests","schema":null,"author":null,"preview":null,"description":null,"published":null},"topicUid":"402842","headerNav":{"items":[{"name":"Guides","id":"402634","url":"/documentation/402634/guides","headerUrl":"/documentation/402635/guides/overview/getting-started","items":[]},{"name":"API","id":"402632","url":"/documentation/402632/api","items":[]},{"name":"Recipes","id":"402633","url":"/documentation/402633/recipes","items":[]},{"name":"Examples","id":"402637","url":"/documentation/402637/examples"},{"name":"Blog","id":"Docs/Blog","url":"/resources/team-blog","href":"/resources/team-blog"},{"name":"FAQ","id":"403936","url":"/documentation/403936/faq","headerUrl":"/documentation/402636/faq/general-info","items":[]},{"name":"Support","id":"Docs/Support","url":"/support","href":"/support"}],"activeItems":[{"name":"Docs","id":"Docs","url":"/documentation/402635/guides/overview/getting-started"},{"name":"Guides","id":"402634","url":"/documentation/402634/guides","headerUrl":"/documentation/402635/guides/overview/getting-started"},{"name":"Intermediate Guides","id":"402634/Intermediate Guides"},{"name":"Intercept HTTP Requests","id":"402842","url":"/documentation/402842/guides/intermediate-guides/intercept-http-requests"}]},"sidebarNav":{"root":{"name":"Guides","id":"402634","url":"/documentation/402634/guides","headerUrl":"/documentation/402635/guides/overview/getting-started"},"items":[{"name":"Overview","id":"402634/Overview","items":[{"name":"Getting Started","id":"402635","url":"/documentation/402635/guides/overview/getting-started"},{"name":"Why TestCafe?","id":"402631","url":"/documentation/402631/guides/overview/why-testcafe"}]},{"name":"Basic Guides","id":"402634/Basic Guides","items":[{"name":"Install TestCafe","id":"402834","url":"/documentation/402834/guides/basic-guides/install-testcafe"},{"name":"Test Structure","id":"402831","url":"/documentation/402831/guides/basic-guides/test-structure"},{"name":"Element Selectors","id":"402829","url":"/documentation/402829/guides/basic-guides/element-selectors"},{"name":"Test Actions","id":"402833","url":"/documentation/402833/guides/basic-guides/test-actions"},{"name":"Assertions","id":"402837","url":"/documentation/402837/guides/basic-guides/assertions"},{"name":"Client Functions","id":"402832","url":"/documentation/402832/guides/basic-guides/client-functions"},{"name":"Run Tests","id":"402830","url":"/documentation/402830/guides/basic-guides/run-tests"},{"name":"Debug Tests","id":"402835","url":"/documentation/402835/guides/basic-guides/debug-tests"}]},{"name":"Best Practices","id":"402634/Best Practices","items":[{"name":"Best Practices","id":"402836","url":"/documentation/402836/guides/best-practices/best-practices"},{"name":"Speed Up Test Execution","id":"402963","url":"/documentation/402963/guides/best-practices/speed-up-test-execution"},{"name":"Page Model","id":"402826","url":"/documentation/402826/guides/best-practices/page-model"},{"name":"Bootstrap your TestCafe project with create-testcafe","id":"404259","url":"/documentation/404259/guides/best-practices/create-testcafe"}]},{"name":"Intermediate Guides","id":"402634/Intermediate Guides","items":[{"name":"Browsers","id":"402828","url":"/documentation/402828/guides/intermediate-guides/browsers"},{"name":"Mobile Devices, Cloud Browsers and Emulation","id":"403584","url":"/documentation/403584/guides/intermediate-guides/mobile-devices-cloud-browsers-and-emulation"},{"name":"Native Automation Mode","id":"404237","url":"/documentation/404237/guides/intermediate-guides/native-automation-mode"},{"name":"Visual Selector Debugger","id":"404288","url":"/documentation/404288/guides/intermediate-guides/visual-selector-debugger"},{"name":"Run Tests Concurrently","id":"403626","url":"/documentation/403626/guides/intermediate-guides/run-tests-concurrently"},{"name":"Reporters","id":"402825","url":"/documentation/402825/guides/intermediate-guides/reporters"},{"name":"TypeScript and CoffeeScript","id":"402824","url":"/documentation/402824/guides/intermediate-guides/typescript-and-coffeescript"},{"name":"Authentication and Roles","id":"402845","url":"/documentation/402845/guides/intermediate-guides/authentication"},{"name":"Screenshots and Videos","id":"402840","url":"/documentation/402840/guides/intermediate-guides/screenshots-and-videos"},{"name":"API Testing","id":"403971","url":"/documentation/403971/guides/intermediate-guides/api-testing"},{"name":"Hooks","id":"403435","url":"/documentation/403435/guides/intermediate-guides/hooks"},{"name":"Quarantine Mode","id":"403841","url":"/documentation/403841/guides/intermediate-guides/quarantine-mode"},{"name":"Live Mode","id":"403842","url":"/documentation/403842/guides/intermediate-guides/live-mode"},{"name":"Intercept HTTP Requests","id":"402842","url":"/documentation/402842/guides/intermediate-guides/intercept-http-requests"},{"name":"Metadata and Filtering","id":"403436","url":"/documentation/403436/guides/intermediate-guides/metadata-and-filtering"},{"name":"Multiple Browser Windows","id":"402841","url":"/documentation/402841/guides/intermediate-guides/multiple-browser-windows"}]},{"name":"Advanced Guides","id":"402634/Advanced Guides","items":[{"name":"Advanced Selector Techniques","id":"403655","url":"/documentation/403655/guides/advanced-guides/advanced-selector-techniques"},{"name":"Inject Client Scripts","id":"402843","url":"/documentation/402843/guides/advanced-guides/inject-client-scripts"},{"name":"ESM Module Support","id":"404258","url":"/documentation/404258/guides/advanced-guides/esm-module-support"},{"name":"Create Custom Test Actions","id":"404150","url":"/documentation/404150/guides/advanced-guides/custom-test-actions"},{"name":"Fire DOM Events","id":"403219","url":"/documentation/403219/guides/advanced-guides/fire-dom-events"},{"name":"Execute Shell Commands on Startup","id":"403849","url":"/documentation/403849/guides/advanced-guides/execute-shell-commands-on-startup"},{"name":"Test HTTPS Features and HTTP/2 Websites","id":"402839","url":"/documentation/402839/guides/advanced-guides/test-https-features-and-http2-websites"},{"name":"Detect the Client Browser and Platform","id":"402844","url":"/documentation/402844/guides/advanced-guides/detect-the-client-browser-and-platform"},{"name":"Use the TestCafe Docker Image","id":"402838","url":"/documentation/402838/guides/advanced-guides/use-testcafe-docker-image"},{"name":"Built-In Wait Mechanisms","id":"402827","url":"/documentation/402827/guides/advanced-guides/built-in-wait-mechanisms"},{"name":"Replay Chrome User Flow Recordings","id":"403998","url":"/documentation/403998/guides/advanced-guides/chrome-replay-support"}]},{"name":"Experimental Capabilities","id":"403997","url":"/documentation/403997/guides/experimental-capabilities","items":[{"name":"Selector Debugging","id":"403999","url":"/documentation/403999/guides/experimental-capabilities/selector-debugging"}]},{"name":"Continuous Integration","id":"402809","url":"/documentation/402809/guides/continuous-integration","items":[{"name":"Integrate TestCafe with AppVeyor","id":"402823","url":"/documentation/402823/guides/continuous-integration/appveyor"},{"name":"Integrate TestCafe with Azure DevOps","id":"402822","url":"/documentation/402822/guides/continuous-integration/azure-devops"},{"name":"Run Tests in Bitbucket Pipelines","id":"402821","url":"/documentation/402821/guides/continuous-integration/bitbucket-pipelines"},{"name":"Integrate TestCafe With CircleCI","id":"402819","url":"/documentation/402819/guides/continuous-integration/circleci"},{"name":"Run Tests on LambdaTest with CircleCI","id":"402820","url":"/documentation/402820/guides/continuous-integration/circleci-and-lambdatest"},{"name":"Integrate TestCafe with GitHub Actions","id":"402817","url":"/documentation/402817/guides/continuous-integration/github-actions"},{"name":"Run Tests on BrowserStack with GitHub Actions","id":"402818","url":"/documentation/402818/guides/continuous-integration/github-actions-and-browserstack"},{"name":"Integrate TestCafe with GitLab","id":"402816","url":"/documentation/402816/guides/continuous-integration/gitlab"},{"name":"Integrate TestCafe with Jenkins","id":"402815","url":"/documentation/402815/guides/continuous-integration/jenkins"},{"name":"Integrate TestCafe with TeamCity","id":"402847","url":"/documentation/402847/guides/continuous-integration/teamcity"},{"name":"Run Tests in Travis CI","id":"402813","url":"/documentation/402813/guides/continuous-integration/travis"},{"name":"Run Tests on Sauce Labs with Travis CI","id":"402814","url":"/documentation/402814/guides/continuous-integration/travis-and-sauce-labs"}]},{"name":"Extend TestCafe","id":"402634/Extend TestCafe","items":[{"name":"Install Plugins","id":"402811","url":"/documentation/402811/guides/extend-testcafe/install-plugins"},{"name":"Reporter Plugin","id":"402810","url":"/documentation/402810/guides/extend-testcafe/reporter-plugin"},{"name":"Browser Provider Plugin","id":"402812","url":"/documentation/402812/guides/extend-testcafe/browser-provider-plugin"}]}],"activeItems":[{"name":"Docs","id":"Docs","url":"/documentation/402635/guides/overview/getting-started"},{"name":"Guides","id":"402634","url":"/documentation/402634/guides","headerUrl":"/documentation/402635/guides/overview/getting-started"},{"name":"Intermediate Guides","id":"402634/Intermediate Guides"},{"name":"Intercept HTTP Requests","id":"402842","url":"/documentation/402842/guides/intermediate-guides/intercept-http-requests"}],"showLeafs":true},"breadcrumbsNav":[{"name":"Docs","id":"Docs","url":"/documentation/402635/guides/overview/getting-started"},{"name":"Guides","id":"402634","url":"/documentation/402634/guides","headerUrl":"/documentation/402635/guides/overview/getting-started"},{"name":"Intermediate Guides","id":"402634/Intermediate Guides"},{"name":"Intercept HTTP Requests","id":"402842","url":"/documentation/402842/guides/intermediate-guides/intercept-http-requests"}],"publishDates":{"teamBlog":[1680566400000,1667260800000,1661904000000,1657584000000,1637107200000,1633564800000,1632268800000,1626220800000,1612828800000,1609113600000,1607644800000,1605657600000,1605571200000,1600905600000,1599091200000,1598400000000,1597968000000,1597795200000,1595980800000,1594684800000,1593475200000,1590364800000,1587340800000],"releaseNotes":[1712188800000,1678147200000,1675036800000,1672272000000,1668038400000,1661904000000,1659916800000,1658102400000,1653523200000,1642464000000,1640131200000,1633132800000,1631059200000,1625702400000,1617753600000,1616371200000,1614729600000,1613347200000,1607990400000,1596672000000,1579219200000,1574294400000,1571184000000,1568246400000,1565136000000,1562284800000,1562025600000,1551312000000,1549497600000,1549497600000,1541548800000,1540425600000,1535932800000,1533168000000,1526342400000,1519862400000,1507593600000,1506643200000,1501632000000,1497312000000,1493164800000,1490659200000,1487203200000,1484784000000,1481155200000,1478563200000,1476662400000]}},"__N_SSG":true},"page":"/documentation/[topicUid]/[...topicTitle]","query":{"topicUid":"402842","topicTitle":["guides","intermediate-guides","intercept-http-requests"]},"buildId":"vHYq0o8zn4Iv4mv1uGpEb","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-265a51dacb3992e55d6f.js"></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.9560630609611a3e02bc.js" async=""></script><script src="/_next/static/chunks/7c1f26e48d9c1d76d0a84bc721eae1bb8e4026f5.c5ff8e6740f85d8cfa32.js" async=""></script><script src="/_next/static/chunks/main-18eaebfcc26b1f12fe7f.js" async=""></script><script src="/_next/static/chunks/pages/_app-0cd866487878711e0df3.js" async=""></script><script src="/_next/static/chunks/13183c147836e35267ff1d4307193ed944e8c549.441bddd825acfa977748.js" async=""></script><script src="/_next/static/chunks/6559847ccf956d21366ca8101d3daaf2d4c4451f.4f2092c962d682918a42.js" async=""></script><script src="/_next/static/chunks/pages/documentation/%5BtopicUid%5D/%5B...topicTitle%5D-60aa84d5d57b6ec44690.js" async=""></script><script src="/_next/static/vHYq0o8zn4Iv4mv1uGpEb/_buildManifest.js" async=""></script><script src="/_next/static/vHYq0o8zn4Iv4mv1uGpEb/_ssgManifest.js" async=""></script></body></html>